<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script type="module" src="/src/main.ts"></script>
  <link rel="stylesheet" type="text/css" href="src/style.css" />
  <title>Bad Snake</title>
  <meta name="description" content="Snake but if it was broken" />
</head>

<body>
  <main>
  <h1>Bad Snake</h1>
  <sub><i>"Snake but if it was broken"</i></sub>
  <div class="box">
    <h2>Number of players</h2>
    <fieldset class="settings">
      <label class="checkbox">
        <input type="radio" id="1" name="players" checked>
        <span>1</span>
      </label>
      <label class="checkbox">
        <input type="radio" id="2" name="players">
        <span>2</span>
      </label>
      <label class="checkbox">
        <input type="radio" id="3" name="players">
        <span>3</span>
      </label>
      <label class="checkbox">
        <input type="radio" id="4" name="players">
        <span>4</span>
      </label>
      <label class="checkbox">
        <input type="radio" id="5" name="players">
        <span>5</span>
      </label>
    </fieldset>
  </div>
  <div class="box">
    <p><i>How to play:</i></p>
    <p>When a round begins, a random combination of 'settings' will appear. These change how the game works, and each
      can be toggled below. </p>
    <p>During the round, both normal and special food will spawn. Both will make your snake longer, but special food
      will cause a powerup, debuff, or event to occur.</p>
  </div>
  <div class="settings-container">
  <div class="box settings-box">
    <h2>Available Settings</h2>
    <h3 class="common">Common</h3>
    <div class="settings">
      <label class="checkbox">
        <input class="setting" type="checkbox" id="SHORT" name="short" checked>
        <span>Short</span>
      </label>
      <label class="checkbox">
        <input class="setting" type="checkbox" id="LONG" name="long" checked>
        <span>Long</span>
      </label>
      <label class="checkbox">
        <input class="setting" type="checkbox" id="DEAD_SCORE" name="dead-score" checked>
        <span>Dead snake scores</span>
      </label>
    </div>
    <h3 class="rare">Rare</h3>
    <div class="settings">
      <label class="checkbox">
        <input class="setting" type="checkbox" id="FAST" name="fast" checked>
        <span>Fast</span>
      </label>
      <label class="checkbox">
        <input class="setting" type="checkbox" id="BIG" name="big" checked>
        <span>Big</span>
      </label>
      <label class="checkbox">
        <input class="setting" type="checkbox" id="SMALL" name="small" checked>
        <span>Small</span>
      </label>
    </div>
      <h3 class="epic">Epic</h3>
    <div class="settings">
      <label class="checkbox">
        <input class="setting" type="checkbox" id="REALLY_LONG" name="really-long" checked>
        <span>REALLY LONG</span>
      </label>
      <label class="checkbox">
        <input class="setting" type="checkbox" id="INVERTED_CONTROLS" name="inverted-controls" checked>
        <span>Inverted Controls</span>
      </label>
    </div>
  </div>
  <div class="box settings-box">
    <h2>Available Special Food Results</h2>
    <h3 class="common">Common</h3>
    <div class="settings">
      <label class="checkbox">
        <input class="event" type="checkbox" id="LENGTH" name="length" checked>
        <span>Length +10</span>
      </label>
    </div>
    <h3 class="rare">Rare</h3>
    <div class="settings">
      <label class="checkbox">
        <input class="event" type="checkbox" id="CURSE" name="cursed" checked>
        <span>Curse</span>
      </label>
      <label class="checkbox">
        <input class="event" type="checkbox" id="SPEED" name="speed" checked>
        <span>Speed (universal)</span>
      </label>
      <label class="checkbox">
        <input class="event" type="checkbox" id="FREAKY_FRIDAY" name="freaky-friday" checked>
        <span>Freaky Friday</span>
      </label>
    </div>
    <h3 class="epic">Epic</h3>
    <div class="settings">
      <label class="checkbox">
        <input class="event" type="checkbox" id="RING_OF_FIRE" name="ring-of-fire" checked>
        <span>Ring of Fire</span>
      </label>
      <label class="checkbox">
        <input class="event" type="checkbox" id="METEORS" name="meteors" checked>
        <span>Meteors</span>
      </label>
    </div>
  </div>
  </div>
  <button id="begin" class="glass-button">BEGIN</button>

  </div>
  <script type="module">
    import { init } from './src/main.ts';
    document.querySelector('#begin').addEventListener('click', begin)
    function begin() {
      const players = document.querySelectorAll('input[name="players"]:checked');
      const settings = document.querySelectorAll('input.setting:checked');
      const events = document.querySelectorAll('input.event:checked');
      const playersCount = parseInt(players[0].id);
      const settingsArray = Array.from(settings).map(setting => setting.id);
      const eventsArray = Array.from(events).map(event => event.id);

      document.querySelector('body').innerHTML = '<canvas id="snake" width="400" height="400"></canvas>'

      init(playersCount, settingsArray, eventsArray)
    }
  </script>
  </main>
</body>

</html>
